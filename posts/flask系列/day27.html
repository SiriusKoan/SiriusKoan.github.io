<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 27 實作 user_bp (5)</title>
    <link rel="icon" href="/img/me.jpg">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/post.css">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/gist.css">
</head>

<body>
    <header>
        <nav>
            <a href="/" class="header-content">SiriusKoan</a>
            <a href="/posts" class="header-content">Posts</a>
            <a href="/about.html" class="header-content">About Me</a>
        </nav>
    </header>
    <a id="top-button" href="#"><span>TOP</span></a>
    <div id="toc">
        <a href="#前言">前言</a>
        <a href="#/@username/posts">/@username/posts</a>
        <a href="#/post/">/post/</a>
        <a href="#/comments">/comments</a>
        <a href="#References">References</a>
    </div>
    <main>
        <h1 id="title"><a href="#">Day 27 實作 user_bp (5)</a></h1>
        <div class="post_content" id="前言">
            <h2><a href="#前言">前言</a></h2>
            <p>
                今天會完成 <code>user_bp</code>，也就是要完成看貼文跟留言的部分。
            </p>
        </div>
        <div class="post_content" id="/posts">
            <h2><a href="#/posts">/posts</a></h2>
            <p>
                首先來看看可以看到全部人貼文的 <code>/posts</code>，他非常簡單，所以就不分別了，直接把 HTML 和路徑都放出來。他沒有資料庫的部分，因為我們會直接用之前的 <code>get_posts</code>。
            </p>
            <script src="https://gist.github.com/SiriusKoan/4604ed82efab6cb732b09b77c1d01ee1.js"></script>
            <p>
                基本上它的 HTML 跟 dashboard 是一樣的，只是刪掉了編輯和刪除的連結，也移掉了篩選器的表單。
            </p>
            <p>
                路徑的部分就更簡單了，就如同剛剛所說的用 <code>get_posts</code>，然後不帶任何篩選器直接抓全部，再丟到 HTML 處理，而處理方式就跟昨天 dashboard 一模一樣。
            </p>
        </div>
        <div class="post_content" id="/@username/posts">
            <h2><a href="#/@username/posts">/@username/posts</a></h2>
            <p>
                接下來我們先看看使用者底下的貼文，基本上跟剛剛一樣，但要稍微改一下資料庫，HTML 也是用一樣的，路徑改一點點就好。
            </p>
            <script src="https://gist.github.com/SiriusKoan/7ab96a904d80a0a27cbbec93d5d182ba.js"></script>
            <p>
                基本上就是用使用者名稱把他整個物件都撈出來，然後當成 <code>get_posts</code> 的篩選器。
            </p>
        </div>
        <div class="post_content" id="/post/">
            <h2><a href="#/post/">/post/</a></h2>
            <p>
                接下來看看瀏覽貼文的介紹，我們這次真的要從資料庫開始寫起。
            </p>
            <script src="https://gist.github.com/SiriusKoan/09268b81ffc5991895c93ed5325f4c51.js"></script>
            <p>
                我們需要新增留言和得到留言，但我們這次就不多驗證了，抓留言的部分要轉成 dict。
            </p>
            <p>
                接下來輪到 HTML，在這裏面需要放蠻多東西的。
            </p>
            <script src="https://gist.github.com/SiriusKoan/3a55bb38da2a131a0d05c824bc5e8947.js"></script>
            <p>
                裡面有一個表單，就是之前寫的新增留言的表單，接下來放的是貼文內容，比較特別的是我們終於用到 <code>| markdown</code> 了，這是 Flask-Markdown 的功勞，最後我們放了一堆 <code>comments</code>，就是從剛剛 <code>get_comments</code> 拿到的。
            </p>
            <p>最後我們來到路徑本身。</p>
            <script src="https://gist.github.com/SiriusKoan/dd3f5588785de426896c9772e7c0062c.js"></script>
            <p>
                基本上就是類似的程式碼，但這次貼文跟留言都要抓到。
            </p>
        </div>
        <div class="post_content" id="/comments">
            <h2><a href="#/comments">/comments</a></h2>
            <p>
                在最後，我們來到了留言的 dashboard。
            </p>
            <script src="https://gist.github.com/SiriusKoan/454b4c8b277abb3be328a188d25074b0.js"></script>
            <p>
                他非常明顯跟剛剛的 <code>get_comments</code> 很接近，幾乎是複製貼上，只是改成了 <code>author_id</code>。
            </p>
            <p>
                接下來是 HTML 的部分。
            </p>
            <script src="https://gist.github.com/SiriusKoan/4102884a27d1a8722a66dc8295456130.js"></script>
            <p>
                基本上他跟剛剛最下面差不多，只是加上了 <code>comment['post_id']</code>，也可以在這邊加個連結連到那則貼文去。
            </p>
            <script src="https://gist.github.com/SiriusKoan/756f75d21c87a4d58eab9d115736e28c.js"></script>
            <p>
                最後來到路徑的部分，非常簡單，就是把留言抓出來然後丟給 HTML 處理好，就結束了。
            </p>
        </div>
    </main>
    <footer>
        <p id="copyright">© 2021 <a href="https://github.com/SiriusKoan" target="_blank">SiriusKoan</a></p>
    </footer>
</body>

</html>
